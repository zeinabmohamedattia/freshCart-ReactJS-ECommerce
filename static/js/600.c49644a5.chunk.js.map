{"version":3,"file":"static/js/600.c49644a5.chunk.js","mappings":"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","sources":["Components/Products/Products.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport axios from 'axios';\nimport { FallingLines } from 'react-loader-spinner';\nimport { Link } from 'react-router-dom';\nimport { CartContext } from '../../Context/CartContext.js';\nimport toast from 'react-hot-toast';\nimport { WishListContext } from '../../Context/WishListContext.js';\n\nexport default function Products() {\n  const [loading, setLoading] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [cart, setCart] = useState(null);\n  let { getCartItems, setCartCount, addToCart } = useContext(CartContext);\n  const [clickedButtons, setClickedButtons] = useState([]);\n  const [wishList, setWishList] = useState([]);\n  let { addTowishList, deletewishListItems, getwishListItems,setWishListCount } = useContext(WishListContext);\n\n  const handleSearchInputChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n  const searchProducts = () => {\n    const filteredProducts = products.filter((product) =>\n      product.title.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n    if (filteredProducts) {\n      setSearchResults(filteredProducts);\n    } else {\n      setSearchResults([]);\n\n    }\n   };\n  useEffect(() => { \n    getProducts()\n    getList()\n    getItems()\n  }, []);\n  const handleClick = (buttonId) => {\n    if (clickedButtons.includes(buttonId)) {\n      deletelistItems(buttonId)\n    } else {\n      postTowishList(buttonId)\n    }\n\n    // Toggle the clicked state for the current button\n    setClickedButtons((prevClickedButtons) => {\n      if (prevClickedButtons.includes(buttonId)) {\n        return prevClickedButtons.filter((id) => id !== buttonId);\n      } else {\n        return [...prevClickedButtons, buttonId];\n      }\n    });\n  };\n  useEffect(() => {\n    searchProducts();\n  }, [clickedButtons, searchTerm]);\n  \n  async function getList() {\nsetLoading(true)\n    let { data } = await getwishListItems()\n    setWishList(data.data)\n    let clicked = data.data.map(item => item._id)\n    setClickedButtons(clicked)\n    setLoading(false)\n  }\n  async function getProducts() {\n    setLoading(true)\n    let { data } = await axios.get(`https://ecommerce.routemisr.com/api/v1/products`)\n     setProducts(data?.data)\n    setSearchResults(data?.data)\n    setLoading(false)\n  }\n  async function getItems() {\n    let { data } = await getCartItems()\n    if (!data) {\n\n      setCart(null)\n      setCartCount(0)\n    } else {\n      setCart(data)\n      setCartCount(data.numOfCartItems)\n    }\n  }\n  async function postToCart(id) {\n    let { data } = await addToCart(id)\n    if (data.status === 'success') {\n      setCartCount(data.numOfCartItems)\n\n      toast.success(data.message, {\n        duration: 2000,\n      })\n\n    }\n  }\n  async function postTowishList(id) {\n    let { data } = await addTowishList(id)\n    if (data.status === 'success') {\n      setWishList(data.data)\n      setWishListCount(data?.data.length)\n       toast.success(data.message, {\n        duration: 2000,\n      })\n    }\n  }\n  async function deletelistItems(id) {\n    let { data } = await deletewishListItems(id)\n    setWishList(data.data)\n    setWishListCount(data?.data.length)\n     toast.error(data.message, {\n      duration: 2000,\n    })\n  }\n  return <>\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>products</title>\n    </Helmet>\n    {loading ? <div className='row justify-content-center position-fixed top-0 bottom-0 start-0 end-0 bg-light bg-opacity-75 align-items-center'>\n      <FallingLines\n        width=\"100\"\n        height='100'\n        wrapperClass=\"bg-main\"\n        visible={true}\n        ariaLabel=\"falling-circles-loading\"\n      />\n    </div>\n      :\n      <div className='  '>\n        <label className='text-main w-75 d-block mx-auto fw-bold'>Search By Product Name </label>\n        <input type=\"text\" placeholder=\"search....\" value={searchTerm} onChange={handleSearchInputChange} className=\"w-75 mx-auto form-control my-2 \" />\n        <div className='row gy-4 py-5 '>\n          {searchResults.length!==0?\n            searchResults?.map(product =>\n            <>\n              <div key={product.id} className='col-md-3 '>\n              <div className='product p-1'>\n                <Link to={`/productdetails/${product.id}`} className=''>\n                  <img src={product.imageCover} alt={product.title} height={300} className='w-100' />\n                  <span className='font-sm text-main'> {product.category.name}</span>\n                  <h3 className='h6'>{product.title.split(' ').splice(0, 2).join(' ')}</h3>\n                  <div className='d-flex justify-content-between align-items-center py-3'>\n                    <span className='font-sm' >{product.price} EGP</span>\n                    <span className='font-sm' >\n                      <i className='fas fa-star rating-color me-1'></i>\n                      {product.ratingsAverage}\n                    </span>\n                  </div>\n                </Link>\n                <div>\n                  <i\n                    className={`heart-icon ${clickedButtons.includes(product.id) ? 'clicked' : ''} fa fa-heart fa-2x w-100 text-end pointer `}\n                    onClick={() => handleClick(product.id)}\n                  />\n                </div>\n                <button onClick={() => postToCart(product.id)} className='w-100 btn bg-main text-main-light btn-sm'> Add To Cart</button>\n              </div>\n              </div>\n              </>\n              \n            )\n            : <h3 className='text-center'>Your search \"{searchTerm}\" did not match any Products</h3>\n           \n          }\n        </div>\n      </div>\n    }\n  </>\n}\n"],"names":["Products","_getList","_getProducts","_getItems","_postToCart","_postTowishList","_deletelistItems","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","products","setProducts","_useState5","_useState6","searchTerm","setSearchTerm","_useState7","_useState8","searchResults","setSearchResults","_useState9","_useState10","setCart","_useContext","useContext","CartContext","getCartItems","setCartCount","addToCart","_useState11","_useState12","clickedButtons","setClickedButtons","_useState13","_useState14","setWishList","_useContext2","WishListContext","addTowishList","deletewishListItems","getwishListItems","setWishListCount","useEffect","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_yield$axios$get","data","wrap","_context2","prev","next","axios","get","sent","stop","apply","arguments","getProducts","_callee","_yield$getwishListIte","clicked","_context","map","item","_id","getList","_callee3","_yield$getCartItems","_context3","numOfCartItems","getItems","handleClick","buttonId","includes","_x3","_callee6","id","_yield$deletewishList","_context6","length","toast","error","message","duration","deletelistItems","_x2","_callee5","_yield$addTowishList","_context5","status","success","postTowishList","prevClickedButtons","filter","concat","_toConsumableArray","filteredProducts","product","title","toLowerCase","searchProducts","_jsxs","_Fragment","children","Helmet","_jsx","charSet","className","FallingLines","width","height","wrapperClass","visible","ariaLabel","type","placeholder","value","onChange","event","target","Link","to","src","imageCover","alt","category","name","split","splice","join","price","ratingsAverage","onClick","_x","_callee4","_yield$addToCart","_context4","postToCart"],"sourceRoot":""}